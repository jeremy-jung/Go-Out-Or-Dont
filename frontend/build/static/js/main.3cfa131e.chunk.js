(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{22:function(t,e,n){t.exports={button:"button_button__3Pz0r"}},44:function(t,e,n){},45:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var s=n(1),i=n(2),o=n.n(i),c=n(31),a=n.n(c),r=(n(44),n(34)),l=n(38),u=(n(45),n(12)),d=n(19),h=n(14),j=n(13),p=n(17),b=n(22),O=n.n(b),g=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(u.a)(this,n),s=e.call(this,t),console.log(s.props),s}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return this.props.auth.currentUser&&Object(s.jsx)(p.b,{to:"/",className:O.a.button,onClick:function(){return t.props.auth.signOut()},children:"Sign Out"})}}]),n}(o.a.Component),f=n(7),x=n(18),m=(n(25),n(26),n(28),n(21)),v=(n(27),function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).signInWithGoogle=function(){var t=new x.a.auth.GoogleAuthProvider;i.props.auth.signInWithPopup(t)},i.render=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(p.b,{to:"/locations",onClick:i.signInWithGoogle,children:"Sign in with Google"})}),Object(s.jsx)("p",{style:{marginTop:"5px",color:"white"},children:"Brought to you by 4MichelinStars"})]})},i.signInWithGoogle=i.signInWithGoogle.bind(Object(f.a)(i)),i}return n}(o.a.Component)),S=function(t){var e=t.completed,n={height:"100%",width:"".concat(e,"%"),backgroundColor:"#608FDA",borderRadius:"inherit",justifyContent:"center"};return Object(s.jsx)("div",{style:{height:20,width:"100%",backgroundColor:"#ffff",borderRadius:50,margins:10,justifyContent:"center"},children:Object(s.jsx)("div",{style:n})})},C=(n.p,function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).getAPIRating=function(t,e){var n="";"country"==e?n="https://shouldigoout.herokuapp.com/api/rate/country/?location="+t:"state"==e&&(n="https://shouldigoout.herokuapp.com/api/rate/state/?location="+t),fetch(n).then((function(t){return t.json()})).then((function(t){var e=[];for(var n in t){var i={};i[n]=t[n],e.push(i)}s.setState((function(t){return{items:e,apiResponse:!0}})),console.log(s.state.items)}))},s.getLocation=function(t){var e=s.props.match.params.id.substring(0),n=e.indexOf(","),i=e.substring(0,n),o=e.substring(n+1),c={};c.place=i,c.worldOption=o,t(c)},s.getRatings=function(){s.getLocation((function(t){var e=t.worldOption,n=t.place;s.getAPIRating(n,e)}))},s.state={error:null,learningMore:!1,isLoaded:!0,items:[],apiResponse:!1},s.handleLearnMore=s.handleLearnMore.bind(Object(f.a)(s)),s.getAPIRating=s.getAPIRating.bind(Object(f.a)(s)),s.getRatings=s.getRatings.bind(Object(f.a)(s)),s.getRatings(),s}return Object(d.a)(n,[{key:"handleLearnMore",value:function(){this.setState({learningMore:!0,items:this.state.items})}},{key:"render",value:function(){if(1==this.state.apiResponse){var t,e=this.state.learningMore,n="";return n=1==this.state.items[3].goout?"You should go out today!":"Maybe you should stay home today...",t=e?Object(s.jsxs)("div",{class:"detailedResult",children:[Object(s.jsxs)("div",{class:"individualResult",children:[Object(s.jsx)("p",{style:{marginRight:"20px"},children:"UV INDEX"}),Object(s.jsx)(S,{completed:20*this.state.items[0].uv}),Object(s.jsx)("p",{style:{marginLeft:"20px",width:"30px"},children:this.state.items[0].uv})]}),Object(s.jsxs)("div",{class:"individualResult",children:[Object(s.jsx)("p",{style:{marginRight:"20px"},children:"TEMP"}),Object(s.jsx)(S,{completed:20*this.state.items[1].temp}),Object(s.jsx)("p",{style:{marginLeft:"20px",width:"30px"},children:this.state.items[1].temp})]}),Object(s.jsxs)("div",{class:"individualResult",children:[Object(s.jsx)("p",{style:{marginRight:"20px"},children:"COVID-19"}),Object(s.jsx)(S,{completed:20*this.state.items[2].covid}),Object(s.jsx)("p",{style:{marginLeft:"20px",width:"30px"},children:this.state.items[2].covid})]})]}):Object(s.jsx)("p",{}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{class:"simpleResult",children:[undefined,Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{style:{marginTop:"35px"},children:n}),Object(s.jsx)("button",{onClick:this.handleLearnMore,children:"see why"}),Object(s.jsx)("p",{})]})]}),t]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(p.b,{to:"/locations",className:O.a.button,children:"Back to my List"}),Object(s.jsx)(g,{auth:this.props.auth})]})]})}return Object(s.jsx)("div",{children:"Loading results..."})}}]),n}(o.a.Component)),y=n.p+"static/media/logo.057a6dee.png",L=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).handleChange=function(t){"USA"==t.target.value?s.setState({worldOption:"state"}):s.setState({worldOption:"country"}),s.setState({locationSelected:t.target.value})},s.handleStatesChange=function(t){s.setState({locationSelected:t.target.value})},s.handleSubmit=function(){console.log("worldOption: ",s.state.worldOption);var t=s.state.locationSelected,e=s.state.worldOption;s.props.onLocationSubmit(t,e)},s.state={locationSelected:null,worldOption:"country"},s.handleChange=s.handleChange.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s}return Object(d.a)(n,[{key:"render",value:function(){return null==this.props.countries||null==this.props.states?Object(s.jsx)("div",{children:"Loading places.."}):(null==this.state.locationSelected&&this.setState({locationSelected:this.props.countries[0]}),"country"==this.state.worldOption?Object(s.jsxs)("div",{children:[Object(s.jsx)("select",{onChange:this.handleChange,children:this.props.countries.map((function(t){return Object(s.jsx)("option",{children:t})}))}),Object(s.jsx)("button",{onClick:this.handleSubmit,children:"Add Location"})]}):"state"==this.state.worldOption?("USA"==this.state.locationSelected&&this.setState({locationSelected:this.props.states[0]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:"States"}),Object(s.jsx)("select",{onChange:this.handleStatesChange,children:this.props.states.map((function(t){return Object(s.jsx)("option",{children:t})}))}),Object(s.jsx)("button",{onClick:this.handleSubmit,children:"Add Location"})]})):void 0)}}]),n}(o.a.Component),w=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getCountries=function(){fetch("https://shouldigoout.herokuapp.com/api/countries").then((function(t){return t.json()})).then((function(t){i.setState({countries:t.places}),i.setState({apiResultsCountries:!0}),console.log(t.places)}),(function(t){console.log("Error in getCountries: ",t)}))},i.getStates=function(){fetch("https://shouldigoout.herokuapp.com/api/states").then((function(t){return t.json()})).then((function(t){i.setState({states:t.places}),i.setState({apiResultsStates:!0}),console.log(t.places)}),(function(t){console.log("Error in getCountries: ",t)}))},i.onLocationSubmit=function(t,e){i.setState((function(n){return{locationSelected:t,worldOption:e}})),console.log(t);var n=t+","+e;console.log(n),i.sendMessage(n)},i.setLoccArr=function(){i.props.firestore.collection(i.props.auth.currentUser.uid).doc("locations").onSnapshot((function(t){i.setState({locArr:t.data().locations})}))},i.sendMessage=function(t){var e=""+t;console.log("from sendMessage: "+t),i.props.firestore.collection(i.props.auth.currentUser.uid).doc("locations").update({locations:x.a.firestore.FieldValue.arrayUnion(e)}),i.setLoccArr()},i.addCollec=function(){i.props.firestore.collection(i.props.auth.currentUser.uid).doc("locations").get().then((function(t){t.exists||i.props.firestore.collection(i.props.auth.currentUser.uid).doc("locations").set({locations:[""]})}))},i.render=function(){return i.addCollec(),console.log("array is initialized"),1==i.state.locArr[0]?Object(s.jsxs)("main",{children:[Object(s.jsx)("div",{children:Object(s.jsx)(L,{countries:i.state.countries,states:i.state.states,onLocationSubmit:i.onLocationSubmit})}),Object(s.jsx)("div",{children:"Add location with the dropdown list above!"})]}):(console.log("array is initialized"),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("main",{children:[Object(s.jsx)("div",{children:Object(s.jsxs)("h1",{children:["Hello ",i.props.auth.currentUser.displayName]})}),Object(s.jsx)("div",{children:Object(s.jsx)(L,{countries:i.state.countries,states:i.state.states,onLocationSubmit:i.onLocationSubmit})}),Object(s.jsx)("div",{children:i.state.locArr.map((function(t){var e=""+t,n=e.indexOf(","),i=e.substring(0,n);return Object(s.jsxs)("div",{children:[" ",Object(s.jsx)(p.b,{to:"/result/"+t,className:t,value:t,children:i}),"  "]})}))})]})}))},i.state={me:i.props.firestore.collection(i.props.auth.currentUser.uid),locc:null,locArr:[1,2,3,4],countries:null,states:null,locationSelected:null,worldOption:null,apiResultsCountries:!1,apiResultsStates:!1},console.log("addlist is made"),i.sendMessage=i.sendMessage.bind(Object(f.a)(i)),i.onLocationSubmit=i.onLocationSubmit.bind(Object(f.a)(i)),i.addCollec=i.addCollec.bind(Object(f.a)(i)),i.setLoccArr=i.setLoccArr.bind(Object(f.a)(i)),i.getCountries=i.getCountries.bind(Object(f.a)(i)),i.getStates=i.getStates.bind(Object(f.a)(i)),i.setLoccArr(),i.getCountries(),i.getStates(),i}return n}(o.a.Component),R=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("section",{children:this.props.user?Object(s.jsx)(w,{firestore:this.props.firestore,auth:this.props.auth}):Object(s.jsx)(v,{firestore:this.props.firestore,auth:this.props.auth})}),Object(s.jsx)("div",{children:Object(s.jsx)(g,{auth:this.props.auth})})]})}}]),n}(o.a.Component),A=n(5);x.a.initializeApp({apiKey:"AIzaSyBozbLN9F8w_LCmJEvPsCIx82h7Hd0NtrY",authDomain:"comp20finalproj.firebaseapp.com",projectId:"comp20finalproj",storageBucket:"comp20finalproj.appspot.com",messagingSenderId:"721509114501",appId:"1:721509114501:web:3e7a6c1a4147938ca77fec",measurementId:"G-SJD7Z64VEP"});var k=x.a.auth(),I=x.a.firestore();x.a.analytics();var M=function(){var t=Object(m.a)(k),e=Object(l.a)(t,1)[0];return Object(i.useRef)(),console.log("props.auth.currentuser is null"),Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(p.a,{children:Object(s.jsxs)(A.c,{children:[Object(s.jsx)(A.a,{path:"/result/:id",render:function(t){return Object(s.jsx)(C,Object(r.a)(Object(r.a)({},t),{},{auth:k,firestore:I}))}}),Object(s.jsx)(A.a,{path:"/locations",children:Object(s.jsx)(R,{auth:k,firestore:I,user:e})}),Object(s.jsxs)(A.a,{path:"/",children:[Object(s.jsx)("img",{style:{width:"300px"},src:y,alt:"Logo"}),Object(s.jsx)(v,{auth:k})]})]})})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(e){var n=e.getCLS,s=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),s(t),i(t),o(t),c(t)}))};a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(M,{})}),document.getElementById("root")),P()}},[[53,1,2]]]);
//# sourceMappingURL=main.3cfa131e.chunk.js.map